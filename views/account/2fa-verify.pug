extends ../layout

block content
  .pb-2
    .row
      .col-sm-6.offset-sm-3
        h1.display-4 Two-Factor Authentication
        p.lead Enter your authentication code to complete login.
        
        .card
          .card-body
            form(method='POST' action='/account/2fa/verify')
              .mb-3
                label.form-label(for='token') Authentication Code
                input.form-control.form-control-lg(type='text' name='token' id='token' placeholder='123456' maxlength='6' required autofocus)
                .form-text Enter the 6-digit code from your authenticator app, or use a backup code.
              
              button.btn.btn-primary.btn-lg.w-100(type='submit') Verify
              
              .text-center.mt-3
                a(href='/login') ‚Üê Back to Login
        
        script.
          // Auto-submit when 6 digits are entered
          document.getElementById('token').addEventListener('input', function(e) {
            const value = e.target.value.replace(/\D/g, ''); // Remove non-digits
            e.target.value = value;
            if (value.length === 6) {
              e.target.form.submit();
            }
          });
          
          // Focus on input
          document.getElementById('token').focus();
